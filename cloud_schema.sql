
CREATE TABLE stock (
    stock_id TEXT PRIMARY KEY,
    stock_name TEXT,
    industry_group TEXT,
    market_type TEXT,
    issued_shares BIGINT
);

CREATE TABLE daily_deal (
    stock_id TEXT,
    t DATE,
    c DOUBLE PRECISION,
    o DOUBLE PRECISION,
    h DOUBLE PRECISION,
    l DOUBLE PRECISION,
    v BIGINT,
    PRIMARY KEY (stock_id, t)
);

CREATE TABLE daily_skills (
    stock_id TEXT,
    t DATE,
    ma5 DOUBLE PRECISION,
    ma5_ded DOUBLE PRECISION,
    ma10 DOUBLE PRECISION,
    ma10_ded DOUBLE PRECISION,
    ma20 DOUBLE PRECISION,
    ma20_ded DOUBLE PRECISION,
    ma60 DOUBLE PRECISION,
    ma60_ded DOUBLE PRECISION,
    ma120 DOUBLE PRECISION,
    ma120_ded DOUBLE PRECISION,
    ema5 DOUBLE PRECISION,
    ema10 DOUBLE PRECISION,
    ema20 DOUBLE PRECISION,
    ema60 DOUBLE PRECISION,
    ema120 DOUBLE PRECISION,
    macd DOUBLE PRECISION,
    dif DOUBLE PRECISION,
    osc DOUBLE PRECISION,
    k DOUBLE PRECISION,
    d DOUBLE PRECISION,
    j DOUBLE PRECISION,
    rsi5 DOUBLE PRECISION,
    rsi10 DOUBLE PRECISION,
    bollUb DOUBLE PRECISION,
    bollMa DOUBLE PRECISION,
    bollLb DOUBLE PRECISION,
    obv DOUBLE PRECISION,
    obv_ma5 DOUBLE PRECISION,
    obv_ma10 DOUBLE PRECISION,
    obv_ma20 DOUBLE PRECISION,
    obv_ma60 DOUBLE PRECISION,
    obv_ema5 DOUBLE PRECISION,
    obv_ema10 DOUBLE PRECISION,
    obv_ema20 DOUBLE PRECISION,
    obv_ema60 DOUBLE PRECISION,
    mfi DOUBLE PRECISION,
    tenkan DOUBLE PRECISION,
    kijun DOUBLE PRECISION,
    senkouA DOUBLE PRECISION,
    senkouB DOUBLE PRECISION,
    chikou DOUBLE PRECISION,
    di_plus DOUBLE PRECISION,
    di_minus DOUBLE PRECISION,
    adx DOUBLE PRECISION,
    cmf DOUBLE PRECISION,
    cmf_ema5 DOUBLE PRECISION,
    turnover_rate DOUBLE PRECISION,
    PRIMARY KEY (stock_id, t)
);

CREATE TABLE weekly_deal (
    stock_id TEXT,
    t DATE,
    c DOUBLE PRECISION,
    o DOUBLE PRECISION,
    h DOUBLE PRECISION,
    l DOUBLE PRECISION,
    v BIGINT,
    PRIMARY KEY (stock_id, t)
);

CREATE TABLE weekly_skills (
    stock_id TEXT,
    t DATE,
    ma5 DOUBLE PRECISION,
    ma5_ded DOUBLE PRECISION,
    ma10 DOUBLE PRECISION,
    ma10_ded DOUBLE PRECISION,
    ma20 DOUBLE PRECISION,
    ma20_ded DOUBLE PRECISION,
    ma60 DOUBLE PRECISION,
    ma60_ded DOUBLE PRECISION,
    ma120 DOUBLE PRECISION,
    ma120_ded DOUBLE PRECISION,
    ema5 DOUBLE PRECISION,
    ema10 DOUBLE PRECISION,
    ema20 DOUBLE PRECISION,
    ema60 DOUBLE PRECISION,
    ema120 DOUBLE PRECISION,
    macd DOUBLE PRECISION,
    dif DOUBLE PRECISION,
    osc DOUBLE PRECISION,
    k DOUBLE PRECISION,
    d DOUBLE PRECISION,
    j DOUBLE PRECISION,
    rsi5 DOUBLE PRECISION,
    rsi10 DOUBLE PRECISION,
    bollUb DOUBLE PRECISION,
    bollMa DOUBLE PRECISION,
    bollLb DOUBLE PRECISION,
    obv DOUBLE PRECISION,
    obv_ma5 DOUBLE PRECISION,
    obv_ma10 DOUBLE PRECISION,
    obv_ma20 DOUBLE PRECISION,
    obv_ma60 DOUBLE PRECISION,
    obv_ema5 DOUBLE PRECISION,
    obv_ema10 DOUBLE PRECISION,
    obv_ema20 DOUBLE PRECISION,
    obv_ema60 DOUBLE PRECISION,
    mfi DOUBLE PRECISION,
    tenkan DOUBLE PRECISION,
    kijun DOUBLE PRECISION,
    senkouA DOUBLE PRECISION,
    senkouB DOUBLE PRECISION,
    chikou DOUBLE PRECISION,
    di_plus DOUBLE PRECISION,
    di_minus DOUBLE PRECISION,
    adx DOUBLE PRECISION,
    cmf DOUBLE PRECISION,
    cmf_ema5 DOUBLE PRECISION,
    turnover_rate DOUBLE PRECISION,
    PRIMARY KEY (stock_id, t)
);

CREATE TABLE hourly_deal (
    stock_id TEXT,
    ts TIMESTAMP WITHOUT TIME ZONE,
    c DOUBLE PRECISION,
    o DOUBLE PRECISION,
    h DOUBLE PRECISION,
    l DOUBLE PRECISION,
    v BIGINT,
    PRIMARY KEY (stock_id, ts)
);

CREATE TABLE hourly_skills (
    stock_id TEXT,
    ts TIMESTAMP WITHOUT TIME ZONE,
    ma5 DOUBLE PRECISION,
    ma5_ded DOUBLE PRECISION,
    ma10 DOUBLE PRECISION,
    ma10_ded DOUBLE PRECISION,
    ma20 DOUBLE PRECISION,
    ma20_ded DOUBLE PRECISION,
    ma60 DOUBLE PRECISION,
    ma60_ded DOUBLE PRECISION,
    ma120 DOUBLE PRECISION,
    ma120_ded DOUBLE PRECISION,
    ema5 DOUBLE PRECISION,
    ema10 DOUBLE PRECISION,
    ema20 DOUBLE PRECISION,
    ema60 DOUBLE PRECISION,
    ema120 DOUBLE PRECISION,
    macd DOUBLE PRECISION,
    dif DOUBLE PRECISION,
    osc DOUBLE PRECISION,
    k DOUBLE PRECISION,
    d DOUBLE PRECISION,
    j DOUBLE PRECISION,
    rsi5 DOUBLE PRECISION,
    rsi10 DOUBLE PRECISION,
    bollUb DOUBLE PRECISION,
    bollMa DOUBLE PRECISION,
    bollLb DOUBLE PRECISION,
    obv DOUBLE PRECISION,
    obv_ma5 DOUBLE PRECISION,
    obv_ma10 DOUBLE PRECISION,
    obv_ma20 DOUBLE PRECISION,
    obv_ma60 DOUBLE PRECISION,
    obv_ema5 DOUBLE PRECISION,
    obv_ema10 DOUBLE PRECISION,
    obv_ema20 DOUBLE PRECISION,
    obv_ema60 DOUBLE PRECISION,
    mfi DOUBLE PRECISION,
    tenkan DOUBLE PRECISION,
    kijun DOUBLE PRECISION,
    senkouA DOUBLE PRECISION,
    senkouB DOUBLE PRECISION,
    chikou DOUBLE PRECISION,
    di_plus DOUBLE PRECISION,
    di_minus DOUBLE PRECISION,
    adx DOUBLE PRECISION,
    cmf DOUBLE PRECISION,
    cmf_ema5 DOUBLE PRECISION,
    turnover_rate DOUBLE PRECISION,
    PRIMARY KEY (stock_id, ts)
);

CREATE TABLE weekly_deal (
    stock_id TEXT,
    t DATE,
    c DOUBLE PRECISION,
    o DOUBLE PRECISION,
    h DOUBLE PRECISION,
    l DOUBLE PRECISION,
    v BIGINT,
    PRIMARY KEY (stock_id, t)
);

CREATE TABLE turnover_rank (
    stock_id TEXT NOT NULL,
    stock_name TEXT,
    price NUMERIC,           -- 當日收盤價
    type TEXT,               -- 類型，例如 'red_ball'
    record_date DATE NOT NULL,
    PRIMARY KEY (stock_id, record_date, type)
);